"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[790],{37790:(x,l,n)=>{n.r(l),n.d(l,{OAuthModule:()=>S});var u=n(18976),c=n(61104),p=n(1017),v=n(23902),h=n(44204),g=n(47469),o=n(52228),m=n(40770),f=n(55525),y=n(33693);const O=[{path:"callback/:identityProvider",component:(()=>{var e;class a{constructor(t,r,i,d,P,w,R){this.router=t,this.activatedRoute=r,this.apiService=i,this.localStorageService=d,this.toastService=P,this.stateService=w,this.window=R}ngOnInit(){var t=this;return(0,p.Z)(function*(){try{const r=t.activatedRoute.snapshot.queryParamMap.get("error");if(r)return t.toastService.showErrorToast("Login failed: ".concat(r)),void(yield t.router.navigate(["/login"]));const i=t.activatedRoute.snapshot.paramMap.get("identityProvider"),d=yield t.apiService.authenticateWithCode({grantType:"".concat(i,"_auth_code"),code:t.activatedRoute.snapshot.queryParamMap.get("code"),redirectUri:t.getRedirectUri(i),state:t.activatedRoute.snapshot.queryParamMap.get("state")});t.apiService.persistTokens(d)}catch(r){let i=r.message;return r.response&&r.response.data&&r.response.data.error&&(i=r.response.data.error),t.toastService.showErrorToast("Login failed: ".concat(i)),void(yield t.router.navigate(["/login"]))}t.apiService.isAuthenticated=!0,yield t.stateService.init(),t.toastService.showSuccessToast("Successfully logged in"),yield t.router.navigate(["/"])})()}getRedirectUri(t){return"".concat(this.window.location.protocol,"//").concat(this.window.location.host,"/oauth/callback/").concat(t)}}return(e=a).\u0275fac=function(t){return new(t||e)(o.Y36(c.F0),o.Y36(c.gz),o.Y36(v.s),o.Y36(m.n),o.Y36(f.k),o.Y36(h.b),o.Y36(g.m))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-oauth"]],decls:4,vars:0,consts:[[2,"text-align","center","margin-top","4em"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o._UZ(1,"app-loading-state")(2,"br"),o._uU(3," Authenticating ..\n"),o.qZA())},dependencies:[y.X],styles:["li[_ngcontent-%COMP%]{list-style-position:inside}.flex-container-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-container-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center}.dropdown-menu[_ngcontent-%COMP%]{background-color:#2f3136;color:#cfd0d1}.dropdown-item[_ngcontent-%COMP%]{color:#cfd0d1}.dropdown-divider[_ngcontent-%COMP%]{border-top:1px solid #262629}.dropdown-item[_ngcontent-%COMP%]:focus, .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#262629}"]}),a})()}];let M=(()=>{var e;class a{}return(e=a).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[c.Bz.forChild(O),c.Bz]}),a})();var C=n(41447),A=n(64780);let S=(()=>{var e;class a{}return(e=a).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[u.ez,M,C.XC,A.z]}),a})()}}]);