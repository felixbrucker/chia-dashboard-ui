(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"7KxR":function(t,e,o){"use strict";o.r(e),o.d(e,"OAuthModule",function(){return b});var i=o("ofXK"),n=o("tyNb"),r=o("mrSG"),a=o("yTNM"),s=o("gvvY"),c=o("MaMc"),d=o("Ebwu"),l=o("sX8H"),p=o("fXoL"),u=o("qAbx");const h=[{path:"callback/:identityProvider",component:(()=>{class t{constructor(t,e,o,i,n,r,a){this.router=t,this.activatedRoute=e,this.apiService=o,this.localStorageService=i,this.toastService=n,this.stateService=r,this.window=a}ngOnInit(){return Object(r.a)(this,void 0,void 0,function*(){try{const t=this.activatedRoute.snapshot.queryParamMap.get("error");if(t)return this.toastService.showErrorToast(`Login failed: ${t}`),void(yield this.router.navigate(["/login"]));const e=this.activatedRoute.snapshot.paramMap.get("identityProvider"),o=yield this.apiService.authenticateWithCode({grantType:`${e}_auth_code`,code:this.activatedRoute.snapshot.queryParamMap.get("code"),redirectUri:this.getRedirectUri(e),state:this.activatedRoute.snapshot.queryParamMap.get("state")});this.apiService.persistTokens(o)}catch(t){let e=t.message;return t.response&&t.response.data&&t.response.data.error&&(e=t.response.data.error),this.toastService.showErrorToast(`Login failed: ${e}`),void(yield this.router.navigate(["/login"]))}this.apiService.isAuthenticated=!0,yield this.stateService.init(),this.toastService.showSuccessToast("Successfully logged in"),yield this.router.navigate(["/"])})}getRedirectUri(t){return`${this.window.location.protocol}//${this.window.location.host}/oauth/callback/${t}`}}return t.\u0275fac=function(e){return new(e||t)(p.Lb(n.c),p.Lb(n.a),p.Lb(a.a),p.Lb(s.a),p.Lb(c.a),p.Lb(d.a),p.Lb(l.a))},t.\u0275cmp=p.Fb({type:t,selectors:[["app-oauth"]],decls:4,vars:0,consts:[[2,"text-align","center","margin-top","4em"]],template:function(t,e){1&t&&(p.Rb(0,"div",0),p.Mb(1,"app-loading-state"),p.Mb(2,"br"),p.Bc(3," Authenticating ..\n"),p.Qb())},directives:[u.a],styles:["li[_ngcontent-%COMP%]{list-style-position:inside}.flex-container-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-container-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center}.dropdown-menu[_ngcontent-%COMP%]{background-color:#2f3136;color:#cfd0d1}.dropdown-item[_ngcontent-%COMP%]{color:#cfd0d1}.dropdown-divider[_ngcontent-%COMP%]{border-top:1px solid #262629}.dropdown-item[_ngcontent-%COMP%]:focus, .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#262629}"]}),t})()}];let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({imports:[[n.f.forChild(h)],n.f]}),t})();var v=o("1kSV"),f=o("Fepa");let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({imports:[[i.c,g,v.b,f.a]]}),t})()}}]);