"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[979],{96979:(U,l,n)=>{n.r(l),n.d(l,{OAuthModule:()=>P});var u=n(81041),c=n(49418),p=n(60646),h=n(35604),v=n(53382),g=n(42822),o=n(22389),m=n(94723),f=n(98243),y=n(81403);const O=[{path:"callback/:identityProvider",component:(()=>{var e;class a{constructor(t,r,i,d,S,w,R){this.router=t,this.activatedRoute=r,this.apiService=i,this.localStorageService=d,this.toastService=S,this.stateService=w,this.window=R}ngOnInit(){var t=this;return(0,p.A)(function*(){try{const r=t.activatedRoute.snapshot.queryParamMap.get("error");if(r)return t.toastService.showErrorToast("Login failed: ".concat(r)),void(yield t.router.navigate(["/login"]));const i=t.activatedRoute.snapshot.paramMap.get("identityProvider"),d=yield t.apiService.authenticateWithCode({grantType:"".concat(i,"_auth_code"),code:t.activatedRoute.snapshot.queryParamMap.get("code"),redirectUri:t.getRedirectUri(i),state:t.activatedRoute.snapshot.queryParamMap.get("state")});t.apiService.persistTokens(d)}catch(r){let i=r.message;return r.response&&r.response.data&&r.response.data.error&&(i=r.response.data.error),t.toastService.showErrorToast("Login failed: ".concat(i)),void(yield t.router.navigate(["/login"]))}t.apiService.isAuthenticated=!0,yield t.stateService.init(),t.toastService.showSuccessToast("Successfully logged in"),yield t.router.navigate(["/"])})()}getRedirectUri(t){return"".concat(this.window.location.protocol,"//").concat(this.window.location.host,"/oauth/callback/").concat(t)}}return(e=a).\u0275fac=function(t){return new(t||e)(o.rXU(c.Ix),o.rXU(c.nX),o.rXU(h.G),o.rXU(m.s),o.rXU(f.f),o.rXU(v.d),o.rXU(g.j))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-oauth"]],decls:4,vars:0,consts:[[2,"text-align","center","margin-top","4em"]],template:function(t,r){1&t&&(o.j41(0,"div",0),o.nrm(1,"app-loading-state")(2,"br"),o.EFF(3," Authenticating ..\n"),o.k0s())},dependencies:[y.$],styles:["li[_ngcontent-%COMP%]{list-style-position:inside}.flex-container-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-container-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center}.dropdown-menu[_ngcontent-%COMP%]{background-color:#2f3136;color:#cfd0d1}.dropdown-item[_ngcontent-%COMP%]{color:#cfd0d1}.dropdown-divider[_ngcontent-%COMP%]{border-top:1px solid #262629}.dropdown-item[_ngcontent-%COMP%]:focus, .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#262629}"]}),a})()}];let M=(()=>{var e;class a{}return(e=a).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[c.iI.forChild(O),c.iI]}),a})();var C=n(84256),A=n(69690);let P=(()=>{var e;class a{}return(e=a).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[u.MD,M,C.zH,A._]}),a})()}}]);