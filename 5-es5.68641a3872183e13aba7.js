!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"7KxR":function(n,r,o){"use strict";o.r(r),o.d(r,"OAuthModule",function(){return M});var i,a,c,s=o("ofXK"),u=o("tyNb"),d=o("mrSG"),p=o("yTNM"),l=o("gvvY"),h=o("MaMc"),f=o("Ebwu"),v=o("sX8H"),g=o("fXoL"),b=o("qAbx"),w=[{path:"callback/:identityProvider",component:(i=function(){function n(e,r,o,i,a,c,s){t(this,n),this.router=e,this.activatedRoute=r,this.apiService=o,this.localStorageService=i,this.toastService=a,this.stateService=c,this.window=s}var r,o,i;return r=n,(o=[{key:"ngOnInit",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(e=this.activatedRoute.snapshot.queryParamMap.get("error"))){t.next=7;break}return this.toastService.showErrorToast("Login failed: ".concat(e)),t.next=6,this.router.navigate(["/login"]);case 6:return t.abrupt("return",void t.sent);case 7:return n=this.activatedRoute.snapshot.paramMap.get("identityProvider"),t.next=10,this.apiService.authenticateWithCode({grantType:"".concat(n,"_auth_code"),code:this.activatedRoute.snapshot.queryParamMap.get("code"),redirectUri:this.getRedirectUri(n),state:this.activatedRoute.snapshot.queryParamMap.get("state")});case 10:r=t.sent,this.apiService.persistTokens(r),t.next=22;break;case 14:return t.prev=14,t.t0=t.catch(0),o=t.t0.message,t.t0.response&&t.t0.response.data&&t.t0.response.data.error&&(o=t.t0.response.data.error),this.toastService.showErrorToast("Login failed: ".concat(o)),t.next=21,this.router.navigate(["/login"]);case 21:return t.abrupt("return",void t.sent);case 22:return this.apiService.isAuthenticated=!0,t.next=25,this.stateService.init();case 25:return this.toastService.showSuccessToast("Successfully logged in"),t.next=28,this.router.navigate(["/"]);case 28:case"end":return t.stop()}},t,this,[[0,14]])}))}},{key:"getRedirectUri",value:function(t){return"".concat(this.window.location.protocol,"//").concat(this.window.location.host,"/oauth/callback/").concat(t)}}])&&e(r.prototype,o),i&&e(r,i),n}(),i.\u0275fac=function(t){return new(t||i)(g.Kb(u.c),g.Kb(u.a),g.Kb(p.a),g.Kb(l.a),g.Kb(h.a),g.Kb(f.a),g.Kb(v.a))},i.\u0275cmp=g.Eb({type:i,selectors:[["app-oauth"]],decls:4,vars:0,consts:[[2,"text-align","center","margin-top","4em"]],template:function(t,e){1&t&&(g.Qb(0,"div",0),g.Lb(1,"app-loading-state"),g.Lb(2,"br"),g.Ac(3," Authenticating ..\n"),g.Pb())},directives:[b.a],styles:["li[_ngcontent-%COMP%]{list-style-position:inside}.flex-container-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-container-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center}.dropdown-menu[_ngcontent-%COMP%]{background-color:#2f3136;color:#cfd0d1}.dropdown-item[_ngcontent-%COMP%]{color:#cfd0d1}.dropdown-divider[_ngcontent-%COMP%]{border-top:1px solid #262629}.dropdown-item[_ngcontent-%COMP%]:focus, .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#262629}"]}),i)}],m=((a=function e(){t(this,e)}).\u0275fac=function(t){return new(t||a)},a.\u0275mod=g.Ib({type:a}),a.\u0275inj=g.Hb({imports:[[u.f.forChild(w)],u.f]}),a),y=o("1kSV"),x=o("Fepa"),M=((c=function e(){t(this,e)}).\u0275fac=function(t){return new(t||c)},c.\u0275mod=g.Ib({type:c}),c.\u0275inj=g.Hb({imports:[[s.c,m,y.b,x.a]]}),c)}}])}();